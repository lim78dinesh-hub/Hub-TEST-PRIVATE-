<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Game 2 - Dodge the Blocks</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { 
    margin: 0; 
    background: linear-gradient(to bottom, #c6f6d5, #fefcbf); 
    font-family: sans-serif; 
  }
  canvas {
    display: block;
    margin: 2rem auto;
    background: #fff;
    border: 4px solid #38b2ac;
    border-radius: 12px;
  }
</style>
</head>
<body>

<header class="bg-teal-600 text-white p-4 shadow-md flex justify-between items-center sticky top-0 z-50">
  <h1 class="text-2xl font-bold">Game 2 - Dodge the Blocks</h1>
  <a href="index.html" class="bg-white text-teal-600 px-4 py-2 rounded hover:bg-teal-100">Back to Hub</a>
</header>

<main>
  <canvas id="gameCanvas" width="800" height="600"></canvas>
  <p class="text-center text-gray-700 mb-8">
    Use the ← and → arrow keys to move your square. Dodge the falling blocks to survive and score points!
  </p>
</main>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

let player = { x: 350, y: 550, width: 100, height: 20, speed: 7 };
let blocks = [];
let score = 0;
let spawnRate = 60; // frames between block spawns
let frameCount = 0;

function drawPlayer() {
  ctx.fillStyle = '#319795';
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

function drawBlocks() {
  ctx.fillStyle = '#f56565';
  blocks.forEach(block => {
    ctx.fillRect(block.x, block.y, block.width, block.height);
  });
}

function drawScore() {
  ctx.fillStyle = '#2d3748';
  ctx.font = '24px sans-serif';
  ctx.fillText('Score: ' + score, 10, 30);
}

function update() {
  frameCount++;
  if(frameCount % spawnRate === 0) {
    // spawn a new block
    blocks.push({ x: Math.random() * (canvas.width - 50), y: 0, width: 50, height: 20, speed: 4 + score * 0.1 });
  }

  blocks.forEach((block, i) => {
    block.y += block.speed;

    // check collision
    if(block.y + block.height >= player.y && block.x < player.x + player.width && block.x + block.width > player.x) {
      alert('Game Over! Your score: ' + score);
      blocks = [];
      score = 0;
      frameCount = 0;
    }

    // remove blocks off-screen
    if(block.y > canvas.height) {
      blocks.splice(i, 1);
      score++;
    }
  });
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPlayer();
  drawBlocks();
  drawScore();
}

function gameLoop() {
  update();
  draw();
  requestAnimationFrame(gameLoop);
}

// Player controls
document.addEventListener('keydown', (e) => {
  if(e.key === 'ArrowLeft' && player.x > 0) player.x -= player.speed;
  if(e.key === 'ArrowRight' && player.x + player.width < canvas.width) player.x += player.speed;
});

gameLoop();
</script>

</body>
</html>